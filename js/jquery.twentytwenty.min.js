!(function (t) {
    t.fn.twentytwenty = function (e) {
        e = t.extend({ default_offset_pct: 0.5, orientation: "horizontal", before_label: "Before", after_label: "After", no_overlay: !1, move_slider_on_hover: !0, move_with_handle_only: !0, click_to_move: !1 }, e);
        return this.each(function () {
            var n = e.default_offset_pct,
                i = t(this),
                a = e.orientation,
                o = "vertical" === a ? "down" : "left",
                s = "vertical" === a ? "up" : "right";
            if ((i.wrap("<div class='twentytwenty-wrapper twentytwenty-" + a + "'></div>"), !e.no_overlay)) {
                i.append("<div class='twentytwenty-overlay'></div>");
                var r = i.find(".twentytwenty-overlay");
                r.append("<div class='twentytwenty-before-label' data-content='" + e.before_label + "'></div>"), r.append("<div class='twentytwenty-after-label' data-content='" + e.after_label + "'></div>");
            }
            var c = i.find("img:first"),
                l = i.find("img:last");
            i.append("<div class='twentytwenty-handle'></div>");
            var d = i.find(".twentytwenty-handle");
            d.append("<span class='twentytwenty-" + o + "-arrow'></span>"),
                d.append("<span class='twentytwenty-" + s + "-arrow'></span>"),
                i.addClass("twentytwenty-container"),
                c.addClass("twentytwenty-before"),
                l.addClass("twentytwenty-after");
            var f = function (t) {
                    var e = (function (t) {
                        var e = c.width(),
                            n = c.height();
                        return { w: e + "px", h: n + "px", cw: t * e + "px", ch: t * n + "px" };
                    })(t);
                    d.css("vertical" === a ? "top" : "left", "vertical" === a ? e.ch : e.cw),
                        (function (t) {
                            "vertical" === a
                                ? (c.css("clip", "rect(0," + t.w + "," + t.ch + ",0)"), l.css("clip", "rect(" + t.ch + "," + t.w + "," + t.h + ",0)"))
                                : (c.css("clip", "rect(0," + t.cw + "," + t.h + ",0)"), l.css("clip", "rect(0," + t.w + "," + t.h + "," + t.cw + ")")),
                                i.css("height", t.h);
                        })(e);
                },
                w = function (t, e) {
                    return (function (t, e, n) {
                        return Math.max(e, Math.min(n, t));
                    })("vertical" === a ? (e - p) / h : (t - v) / y, 0, 1);
                };
            t(window).on("resize.twentytwenty", function (t) {
                f(n);
            });
            var v = 0,
                p = 0,
                y = 0,
                h = 0,
                u = function (t) {
                    ((t.distX > t.distY && t.distX < -t.distY) || (t.distX < t.distY && t.distX > -t.distY)) && "vertical" !== a
                        ? t.preventDefault()
                        : ((t.distX < t.distY && t.distX < -t.distY) || (t.distX > t.distY && t.distX > -t.distY)) && "vertical" === a && t.preventDefault(),
                        i.addClass("active"),
                        (v = i.offset().left),
                        (p = i.offset().top),
                        (y = c.width()),
                        (h = c.height());
                },
                _ = function (t) {
                    i.hasClass("active") && ((n = w(t.pageX, t.pageY)), f(n));
                },
                m = function () {
                    i.removeClass("active");
                },
                g = e.move_with_handle_only ? d : i;
            g.on("movestart", u),
                g.on("move", _),
                g.on("moveend", m),
                e.move_slider_on_hover && (i.on("mouseenter", u), i.on("mousemove", _), i.on("mouseleave", m)),
                d.on("touchmove", function (t) {
                    // t.preventDefault();
                }),
                i.find("img").on("mousedown", function (t) {
                    // t.preventDefault();
                }),
                e.click_to_move &&
                    i.on("click", function (t) {
                        (v = i.offset().left), (p = i.offset().top), (y = c.width()), (h = c.height()), (n = w(t.pageX, t.pageY)), f(n);
                    }),
                t(window).trigger("resize.twentytwenty");
        });
    };
})(jQuery);
